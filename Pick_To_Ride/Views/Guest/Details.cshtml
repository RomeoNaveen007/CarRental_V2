@model Pick_To_Ride.Models.Entities.Car

@{
    ViewData["Title"] = "Car Details";
    Layout = "_GuestLayout";
}

<link rel="stylesheet" href="~/css/custom.css" />

<div class="container py-4">
    <div class="row">
        <div class="col-md-6">
            <img src="@Model.ImageURL" class="img-fluid rounded shadow-sm" alt="@Model.CarName"
                 style="height:350px;object-fit:cover;width:100%;" />
        </div>
        <div class="col-md-6">
            <h2>@Model.CarName</h2>
            <p class="text-muted">@Model.Brand • @Model.Category</p>
            <p>@Model.Description</p>

            <h4>LKR @Model.DailyRate / day</h4>
            <p>
                Status:
                <span class="badge bg-@(Model.Status == "Available" ? "success" : "secondary")">
                    @Model.Status
                </span>
            </p>

            <div class="mt-3">
                <a href="javascript:void(0);" class="btn btn-primary"
                   onclick="openBookPrompt('@Model.CarId')">Book Now</a>
                <a asp-action="Catalog" class="btn btn-outline-secondary ms-2">Back to Catalog</a>
            </div>
        </div>
    </div>
</div>

<!-- Include Book Prompt Modal -->
<div class="modal fade" id="bookPromptModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body" id="bookPromptContent"></div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        function openBookPrompt(carId) {
            $.get('/Guest/BookPrompt?carId=' + carId, function (data) {
                $('#bookPromptContent').html(data);
                $('#bookPromptModal').modal('show');
            });
        }
    </script>
}
